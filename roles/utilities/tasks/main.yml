---
  - name: Install the latest versions of utility packages using yum
    yum: pkg={{item}} state=latest
    with_items:
     - asciidoc
     - byobu
     - curl
     - git
     - htop
     - iotop
     - lshw
     - nmap
     - p7zip
     - pngcrush
     - setroubleshoot
     - setools
     - sos
     - telnet
     - unzip
     - vim
     - wget
     - fio
     - tcpdump
     - duplicity
     - pv
     - mc
     - yum-utils

  # This could be done using yum but depending on the ansible version it's either  "'@Development Tools'" or  '@Development Tools'
  - name: Install the 'Development Tools' group using yum
    command: yum -y install '@Development Tools'
    args:
      creates: /usr/bin/svn

  - name: Install SCL repository
    yum: name=centos-release-scl state=latest

  - name: Install rh-ruby24
    yum: name=rh-ruby24 state=latest

  - name: Enable ruby 2.4
    lineinfile:
      path: /root/.bashrc
      line: 'source scl_source enable rh-ruby24'

  - name: Install the latest versions of additional development packages using yum
    yum: pkg={{item}} state=latest
    with_items:
     - php-cli
     - python-devel
     - python-pip
     - rh-ruby24-build
     - rh-ruby24-ruby-devel
     - rh-ruby24-rubygems-devel
     - rh-ruby24-rubygem-bundler

  - name: upgrade pip
    shell: pip install --upgrade pip

  - name: install speedtest
    shell: pip install speedtest-cli

  - name: Install the latest version of jekyll and travis using rubygems
    shell: bash -c 'source scl_source enable rh-ruby24; gem install jekyll travis bundler rubygems-update; update_rubygems'

  - name: Remove immutable bit from /usr/lib/udev/rules.d/60-net.rules
    command: chattr -i /usr/lib/udev/rules.d/60-net.rules
